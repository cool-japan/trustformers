# Configuration for cbindgen to generate C headers

language = "C"
namespace = "TrustformeRS"
style = "both"
cpp_compat = true

header = """
/* TrustformeRS C API
 * High-performance transformer library for machine learning
 * 
 * This file provides C bindings for the TrustformeRS library,
 * enabling integration with other programming languages.
 * 
 * Generated automatically - do not edit manually.
 */"""

include_guard = "TRUSTFORMERS_H"
pragma_once = true
autogen_warning = "/* Warning: This file is autogenerated by cbindgen. Don't modify manually. */"
include_version = true

[includes]
# Standard C headers
includes = [
    "stdint.h",
    "stdlib.h", 
    "stdbool.h",
    "stddef.h"
]

after_includes = """
#ifdef __cplusplus
extern "C" {
#endif

/* Version information */
#define TRUSTFORMERS_VERSION_MAJOR 0
#define TRUSTFORMERS_VERSION_MINOR 1 
#define TRUSTFORMERS_VERSION_PATCH 0

/* API calling convention */
#ifndef TRUSTFORMERS_API
#  ifdef _WIN32
#    ifdef TRUSTFORMERS_EXPORTS
#      define TRUSTFORMERS_API __declspec(dllexport)
#    else
#      define TRUSTFORMERS_API __declspec(dllimport)
#    endif
#  else
#    define TRUSTFORMERS_API
#  endif
#endif
"""

trailer = """
#ifdef __cplusplus
}
#endif
"""

[export]
# Include items from these modules
include = [
    "TrustformersError",
    "TrustformersBuildInfo", 
    "TrustformersMemoryUsage",
    "TrustformersPerformanceMetrics",
    "TrustformersPipeline",
    "TrustformersPipelineConfig",
    "TrustformersInferenceResult",
    "TrustformersBatchResult",
    "TrustformersTokenizer",
    "TrustformersTokenIds",
    "TrustformersEncoding",
    "TrustformersBatchEncoding",
    "TrustformersTokenizerConfig",
    "TrustformersModel",
    "TrustformersTensor",
    "TrustformersModelConfig",
    "TrustformersTensorInfo",
    "TrustformersModelMetadata",
    "TrustformersBenchmarkResult",
    "TrustformersSystemInfo"
]

# Exclude internal implementation details
exclude = [
    "ResourceRegistry",
    "PerformanceTimer"
]

[fn]
# Function naming and export settings
prefix = "TRUSTFORMERS_API "
postfix = ""
args = "Vertical"
ret = "Vertical"

# Rename some functions for consistency
rename_args = { }

[struct]
# Struct layout and naming
derive_eq = false
derive_neq = false

[enum]
# Enum settings
rename_variants = "ScreamingSnakeCase"
add_sentinel = false
prefix_with_name = false

[const]
# Constants settings
allow_static_const = true

[macro_expansion]
# Control macro expansion
bitflags = true

[parse]
# Parsing settings
parse_deps = false
include = [
    "src/lib.rs",
    "src/model.rs",
    "src/tokenizer.rs", 
    "src/pipeline.rs",
    "src/memory_safety.rs",
    "src/utils.rs"
]
exclude = [
    "src/cloud/*",
    "src/containers/*", 
    "src/codegen/*",
    "src/bin/*",
    "src/debug_utilities.rs",
    "src/profiling_tools.rs",
    "src/thread_pool.rs",
    "src/fuzzing.rs",
    "src/abi_stability.rs"
]
clean = false
extra_bindings = []

[documentation]
# Documentation settings
style = "c99"